<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>QPSK Receiver with ADALM-PLUTO Radio in Simulink</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "Communications Toolbox Support Package for Analog Devices ADALM-Pluto Radio"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../digital-modulation.html",
          "name": "Digital Modulation"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "digital-modulation"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "QPSK Receiver with ADALM-PLUTO Radio in Simulink",
          "description": "How to use the the ADALM-PLUTO Radio with Simulink&#174; to implement a QPSK receiver. The receiver addresses practical issues in wireless communications, e.g. carrier frequency and phase offset, timing offset and frame synchronization. This model receives the signal sent by the QPSK Transmitter with ADALM-PLUTO Radio model. The receiver demodulates the received symbols and outputs a simple message to the MATLAB&#174; command line.",
          "thumbnailURL": "../../../examples/plutoradio/win64/QPSKReceiverWithADALMPLUTORadioSimulinkExample_01.png",
          "genre": "Model",
          "isBasedOn": {
          "@type": "Product",
          "name": "Simulink"

        },
          "identifier": "plutoradio.QPSKReceiverWithADALMPLUTORadioSimulinkExample",
          "name": "QPSKReceiverWithADALMPLUTORadioSimulinkExample",
          "url": "qpsk-receiver-with-adalm-pluto-radio-1.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('plutoradio/QPSKReceiverWithADALMPLUTORadioSimulinkExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "QPSKReceiverWithADALMPLUTORadioSimulinkExample.m",
        "plutoradioQPSKReceiverSimulinkExample.slx",
        "plutoradioqpskreceiver_init.m",
        "FrameSynchronizer.m"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="fe">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This model shows how to use the the ADALM-PLUTO Radio with Simulink&#174; to implement a QPSK receiver."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../../examples/plutoradio/win64/QPSKReceiverWithADALMPLUTORadioSimulinkExample_01.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/jquery/jquery-latest.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../../docset/docset.xml";
            product_help_location = "supportpkg/plutoradio";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/bootstrap.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-xs-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2023a" data-language="en" action="../../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="sr-only">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div class="input-group-btn"><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search pull-right icon_32 visible-xs" data-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="visible-xs" id="search_actuator"><button class="btn icon-search btn_search pull-right icon_16" data-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-toggle="offcanvas" data-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="sr-only">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav">Communications Toolbox Support Package for Analog Devices ADALM-Pluto Radio</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../digital-modulation.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Digital Modulation</span></a></li></ul><ul class="nav_scrollspy nav">
<li class="nav_scrollspy_function"><a href="#responsive_offcanvas">QPSK Receiver with ADALM-PLUTO Radio in Simulink</a></li>
<li class="nav_scrollspy_title" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li><a href="#d124e7661" class="intrnllnk">Overview</a></li><li><a href="#d124e7666" class="intrnllnk">Structure of the Example</a></li><li><a href="#d124e7717" class="intrnllnk">Receiver</a></li><li><a href="#d124e7721" class="intrnllnk">AGC</a></li><li><a href="#d124e7730" class="intrnllnk">Raised Cosine Receive Filtering</a></li><li><a href="#d124e7735" class="intrnllnk">Coarse Frequency Compensation</a></li><li><a href="#d124e7745" class="intrnllnk">Symbol Synchronization</a></li><li><a href="#d124e7762" class="intrnllnk">Carrier Synchronization</a></li><li><a href="#d124e7777" class="intrnllnk">Frame Synchronization</a></li><li><a href="#d124e7782" class="intrnllnk">Decode Data</a></li><li><a href="#d124e7795" class="intrnllnk">Running the Example</a></li><li><a href="#d124e7827" class="intrnllnk">Exploring the Example</a></li><li><a href="#d124e7852" class="intrnllnk">References</a></li></ul>
</nav></div></nav>
<script src="../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 hidden-xs"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=digital-modulation&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=digital-modulation&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_block" class="crux_resource"><a href="../referencelist.html?type=block&amp;category=digital-modulation&amp;s_tid=CRUX_topnav">Blocks</a></li></ul></div></nav></div><div class="visible-xs"><div class="container-fluid"><div class="row"><div class="col-xs-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources<span class="icon-arrow-down icon_16"></span></button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=digital-modulation&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=digital-modulation&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_block" class="crux_resource"><a href="../referencelist.html?type=block&amp;category=digital-modulation&amp;s_tid=CRUX_topnav">Blocks</a></li></ul></div></div></div><div class="col-xs-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-xs-12">

<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-example">
<section itemprop="content"><div class="example_icon"></div><h1 class="r2023a" itemprop="title content" id="example-plutoradioQPSKReceiverSimulinkExample">QPSK Receiver with ADALM-PLUTO Radio in Simulink</h1><div class="examples_short_list hidden_ios_android"><div data-pane="metadata" class="panel metadata_container panel-default"><div class="panel-body metadata_content"><p class="add_margin_5">This example uses:</p><ul class="list-unstyled add_border_bottom example_product_list" itemprop="requiredprods"><li><a href="matlab:matlab.internal.language.introspective.showAddon('PLUTO')">Communications Toolbox Support Package for Analog Devices ADALM-PLUTO Radio</a></li><li><a href="matlab:matlab.internal.language.introspective.showAddon('SL')">Simulink</a></li></ul><a class="btn btn_secondary btn-block" href="matlab:openExample('plutoradio/QPSKReceiverWithADALMPLUTORadioSimulinkExample')" data-ex-genre="Model">Open Model</a></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="plutoradio-QPSKReceiverWithADALMPLUTORadioSimulinkExample"><meta itemprop="exampletitle" content="QPSK Receiver with ADALMPLUTO Radio in Simulink"></div><span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample" class="anchor_target"></span>

<p class="shortdesc">This model shows how to use the the ADALM-PLUTO Radio with Simulink&#174; to implement a QPSK receiver. The receiver addresses practical issues in wireless communications, e.g. carrier frequency and phase offset, timing offset and frame synchronization. This model receives the signal sent by the <a href="matlab:openExample('plutoradio/QPSKTransmitterWithADALMPLUTORadioSimulinkExample','supportingFile','plutoradioQPSKTransmitterSimulinkExample')" target="_blank">QPSK Transmitter with ADALM-PLUTO Radio</a> model. The receiver demodulates the received symbols and outputs a simple message to the MATLAB&#174; command line.</p>

<div class="procedure"><h3 class="title" id="d124e7661">Overview<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-1" class="anchor_target"></span></h3><p>This model performs all processing at complex baseband to handle a time-varying frequency offset, a time-varying symbol delay, and Gaussian noise. To cope with the above-mentioned impairments, this example provides a reference design of a practical digital receiver, which includes correlation-based coarse frequency compensation, symbol timing recovery with fixed-rate resampling and bit stuffing/skipping, fine frequency compensation, frame synchronization and phase ambiguity resolution. The example uses some key algorithms in MATLAB, emphasizing textual algorithm expression over graphical algorithm expression.</p><h3 class="title" id="d124e7666">Structure of the Example<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-2" class="anchor_target"></span></h3><p>The top-level structure of the model is shown in the following figure, which includes a ADALM-PLUTO receiver block, a QPSK Receiver subsystem and a BER Display blocks.</p><div class="informalfigure"><div id="d124e7672" class="mediaobject"><p><img src="../../../examples/plutoradio/win64/QPSKReceiverWithADALMPLUTORadioSimulinkExample_01.png"></p></div></div><p>The detailed structures of the QPSK Receiver subsystem are illustrated in the following figure.</p><div class="informalfigure"><div id="d124e7677" class="mediaobject"><p><img src="../../../examples/plutoradio/win64/QPSKReceiverWithADALMPLUTORadioSimulinkExample_02.png"></p></div></div><p>The components are further described in the following sections.</p><div class="itemizedlist"><ul><li><p><strong class="emphasis bold">AGC</strong> - Automatic gain control</p></li><li><p><strong class="emphasis bold">Raised Cosine Receive Filterring</strong> - Uses a rolloff factor of 0.5</p></li><li><p><strong class="emphasis bold">Coarse Frequency Compensation</strong> - Estimates an approximate frequency offset of the received signal and corrects it</p></li><li><p><strong class="emphasis bold">Symbol Synchronization</strong> - Resamples the input signal according to a recovered timing strobe so that symbol decisions are made at the optimum sampling instants</p></li><li><p><strong class="emphasis bold">Carrier Synchronization</strong> - Compensates for the residual frequency offset and the phase offset</p></li><li><p><strong class="emphasis bold">Frame Synchronization</strong> - Detects location of the frame header and aligns the frame boundaries at the known frame header</p></li><li><p><strong class="emphasis bold">Decode Data</strong> - Resolves the phase ambiguity caused by the Carrier Synchronizer, demodulates the signal, and decodes the text message</p></li></ul></div><h3 class="title" id="d124e7717">Receiver<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-6" class="anchor_target"></span></h3><h3 class="title" id="d124e7721">AGC<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-7" class="anchor_target"></span></h3><p>The received signal amplitude affects the accuracy of the carrier and symbol synchronizer. Therefore the signal amplitude should be stabilized to ensure an optimum loop design. The AGC output power is set to a value ensuring that the equivalent gains of the phase and timing error detectors keep constant over time. The AGC is placed before the Raised Cosine Receive Filter so that the signal amplitude can be measured with an oversampling factor of two, thus improving the accuracy of the estimate. You can refer to Chapter 7.2.2 and Chapter 8.4.1 of [ <a href="#QPSKReceiverWithADALMPLUTORadioSimulinkExample-16" class="intrnllnk">1</a> ] for details on how to design the phase detector gain.</p><h3 class="title" id="d124e7730">Raised Cosine Receive Filtering<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-8" class="anchor_target"></span></h3><p>The Raised Cosine Receive Filter provides matched filtering for the transmitted waveform with a rolloff factor of 0.5.</p><h3 class="title" id="d124e7735">Coarse Frequency Compensation<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-9" class="anchor_target"></span></h3><p>The Coarse Frequency Compensation subsystem corrects the input signal with a rough estimate of the frequency offset. The following diagram shows the subsystem, in which the frequency offset is estimated by averaging the output of the correlation-based algorithm of the Coarse Frequency Compensator block. The compensation is performed by the Phase/Frequency Offset block. There is usually a residual frequency offset even after the coarse frequency compensation, which would cause a slow rotation of the constellation.  The Carrier Synchronizer block compensates for this residual frequency.</p><p>The accuracy of the Coarse Frequency Compensator decreases with its maximum frequency offset value. Ideally, this value should be set just above the expected frequency offset range.</p><div class="informalfigure"><div id="d124e7742" class="mediaobject"><p><img src="../../../examples/plutoradio/win64/QPSKReceiverWithADALMPLUTORadioSimulinkExample_03.png"></p></div></div><h3 class="title" id="d124e7745">Symbol Synchronization<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-10" class="anchor_target"></span></h3><p>The timing recovery is performed by a Symbol Synchronizer library block, which implements a PLL, described in Chapter 8 of [ <a href="#QPSKReceiverWithADALMPLUTORadioSimulinkExample-16" class="intrnllnk">1</a> ], to correct the timing error in the received signal. The timing error detector is estimated using the Gardner algorithm, which is rotationally invariant. In other words, this algorithm can be used before or after frequency offset compensation. The input to the block is oversampled by two. On average, the block generates one output symbol for every two input samples. However, when the channel timing error (delay) reaches symbol boundaries, there will be one extra or missing symbol in the output frame. In that case, the block implements bit stuffing/skipping and generates one more or less samples comparing to the desired frame size. So the output of this block is a variable-size signal.</p><p>The <span class="emphasis"><em>Damping factor</em></span>, <span class="emphasis"><em>Normalized loop bandwidth</em></span>, and <span class="emphasis"><em>Detector gain</em></span> parameters of the block are tunable. Their default values are set to 1 (critical damping), 0.01 and 5.4 respectively, so that the PLL quickly locks to the correct timing while introducing little timing jitter.</p><h3 class="title" id="d124e7762">Carrier Synchronization<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-11" class="anchor_target"></span></h3><p>The fine frequency compensation is performed by a Carrier Synchronizer library block, which implements a phase-locked loop (PLL), described in Chapter 7 of [ <a href="#QPSKReceiverWithADALMPLUTORadioSimulinkExample-16" class="intrnllnk">1</a> ], to track the residual frequency offset and the phase offset in the input signal. The PLL uses a Direct Digital Synthesizer (DDS) to generate the compensating phase that offsets the residual frequency and phase offsets. The phase offset estimate from DDS is the integral of the phase error output of a Loop Filter.</p><p>The <span class="emphasis"><em>Damping factor</em></span> and <span class="emphasis"><em>Normalized loop bandwidth</em></span> parameters of the block are tunable. Their default values are set to 1 (critical damping) and 0.01 respectively, so that the PLL quickly locks to the intended phase while introducing little phase noise.</p><h3 class="title" id="d124e7777">Frame Synchronization<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-12" class="anchor_target"></span></h3><p>The Frame Synchronizer MATLAB System block uses the known frame header (QPSK-modulated Barker code) to correlate against the received QPSK symbols to locate the frame header and align the frame boundaries. It also transforms the variable-size output of the Symbol Synchronizer block into a fixed-size frame, which is necessary for the downstream processing. The second output of the block is a boolean scalar indicating if the first output is a valid frame with the desired header and if so, enables the Data Decoding subsystem to run.</p><h3 class="title" id="d124e7782">Decode Data<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-13" class="anchor_target"></span></h3><p>The Data Decoding enabled subsystem performs phase ambiguity resolution, demodulation and text message decoding. The Carrier Synchronizer block may lock to the unmodulated carrier with a phase shift of 0, 90, 180, or 270 degrees, which can cause a phase ambiguity. For details of phase ambiguity and its resolution, please refer to Chapter 7.2.2 and 7.7 in [ <a href="#QPSKReceiverWithADALMPLUTORadioSimulinkExample-16" class="intrnllnk">1</a> ]. The Phase Offset Estimator subsystem determines this phase shift. The Phase Ambiguity Correction &amp; Demodulation subsystem rotates the input signal by the estimated phase offset and demodulates the corrected data. The payload bits are descrambled, and then decoded. All of the stored bits are converted to characters are printed in the Simulink Diagnostic Viewer.</p><div class="informalfigure"><div id="d124e7792" class="mediaobject"><p><img src="../../../examples/plutoradio/win64/QPSKReceiverWithADALMPLUTORadioSimulinkExample_04.png"></p></div></div><h3 class="title" id="d124e7795">Running the Example<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-14" class="anchor_target"></span></h3><p>Before running this model, connect two ADALM-PLUTO Radios to the computer and start the <a href="matlab:openExample('plutoradio/QPSKTransmitterWithADALMPLUTORadioSimulinkExample','supportingFile','plutoradioQPSKTransmitterSimulinkExample')" target="_blank">QPSK Transmitter with ADALM-PLUTO Radio</a> model first. This receiver model is capable of handling a frequency offset of 12.5kHz between the transmitter and receiver boards. However, when the frequency offset exceeds this range, the Coarse Frequency Compensation subsystem cannot accurately determine the offset of the received signal, which is critical for correct timing recovery and data decoding. Due to hardware variations among the ADALM-PLUTO Radios, a frequency offset will likely exist between the transmitter hardware and the receiver hardware. In that case, perform a manual frequency calibration using the companion frequency offset calibration <a href="matlab:openExample('plutoradio/FrequencyOffsetCalibrationWithADALMPLUTORadioSimulinkExample','supportingFile','plutoradiofreqcalib')" target="_blank">transmitter</a> and <a href="matlab:openExample('plutoradio/FrequencyOffsetCalibrationWithADALMPLUTORadioSimulinkExample','supportingFile','plutoradiofreqcalib_rx')" target="_blank">receiver</a> models and examine the resulting behavior. With that frequency offset value, you can manually adjust the <span class="emphasis"><em>Center frequency</em></span> of the ADALM-PLUTO Receiver subsystem in the receiver model to ensure a residual frequency offset that the model can track.</p><p>If the received signal is too weak or too strong, you might notice some garbled message output. In that case, you can change the gain of either the ADALM-PLUTO Transmitter subsystem in the <a href="matlab:openExample('plutoradio/QPSKTransmitterWithADALMPLUTORadioSimulinkExample','supportingFile','plutoradioQPSKTransmitterSimulinkExample')" target="_blank">QPSK Transmitter with ADALM-PLUTO Radio</a> model or the ADALM-PLUTO Receiver subsystem in the current model for better reception.</p><p>Set the <span class="emphasis"><em>Center frequency</em></span> parameter of the ADALM-PLUTO Radio Receiver block according to the center frequency setting of the <a href="matlab:openExample('plutoradio/QPSKTransmitterWithADALMPLUTORadioSimulinkExample','supportingFile','plutoradioQPSKTransmitterSimulinkExample')" target="_blank">QPSK Transmitter with ADALM-PLUTO Hardware</a> model and the frequency calibration result. Then run the model. To ensure real-time processing, the model is by default set to run in Accelerator mode, and to remove all signal visualization. The received messages are decoded and printed out in the <code class="literal">View diagnostics</code> window while the simulation is running. To ensure real-time operation, run the models on two separate MATLAB sessions; one for transmitter and the other for receiver.</p><h3 class="title" id="d124e7827">Exploring the Example<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-15" class="anchor_target"></span></h3><p>The example allows you to experiment with multiple system capabilities to examine their effect on bit error rate performance.</p><p>You can tune the <span class="emphasis"><em>Normalized loop bandwidth</em></span> and <span class="emphasis"><em>Damping factor</em></span> parameters of the Symbol Synchronizer and Carrier Synchronizer blocks, to assess their convergence time and estimation accuracy. In addition, you can assess the pull-in range of the Carrier Synchronizer block. With a large <span class="emphasis"><em>Normalized loop bandwidth</em></span> and <span class="emphasis"><em>Damping factor</em></span>, the PLL can acquire over a greater frequency offset range. However a large <span class="emphasis"><em>Normalized loop bandwidth</em></span> allows more noise, which leads to a large mean squared error in the phase estimation. "Underdamped systems (with Damping Factor less than one) have a fast settling time, but exhibit overshoot and oscillation; overdamped systems (with Damping Factor greater than one) have a slow settling time but no oscillations." [ <a href="#QPSKReceiverWithADALMPLUTORadioSimulinkExample-16" class="intrnllnk">1</a> ]. For more detail on the design of these PLL parameters, you can refer to Appendix C in [ <a href="#QPSKReceiverWithADALMPLUTORadioSimulinkExample-16" class="intrnllnk">1</a> ].</p><p>You can also tune the Preamble detector threshold and see its effects on the output message.</p><h3 class="title" id="d124e7852">References<span id="QPSKReceiverWithADALMPLUTORadioSimulinkExample-16" class="anchor_target"></span></h3><p>1. Michael Rice, "Digital Communications - A Discrete-Time Approach", Prentice Hall, April 2008.</p></div></section>
    </div>
<div class="modal fade" id="open-example-dialog" tabindex="-1" role="dialog" aria-labelledby="openExampleDialogLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button><h2 class="h3 modal-title">Open Example</h2></div><div class="modal-body" id="dialog-body"><p>You have a modified version of this example. Do you want to open this example with your edits?</p></div><div class="modal-footer"><a id="open-example-dialog-replace" class="btn btn_color_blue companion_btn" data-dismiss="modal">No, open this example and discard my edits</a><a id="open-example-dialog-continue" class="btn btn_color_blue" data-dismiss="modal">Yes</a></div></div></div></div>
<div class="clearfix"></div>
<div align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></section>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-xs-12">
<p class="copyright">© 1994-2023 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
