<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>LTE Transmitter Using Software Defined Radio</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "Communications Toolbox Support Package for Analog Devices ADALM-Pluto Radio"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../application-specific-examples.html",
          "name": "Application-Specific"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "application-specific-examples"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "LTE Transmitter Using Software Defined Radio",
          "description": "Generate a reference measurement channel (RMC) downlink (DL) LTE waveform suitable for over-the-air transmission. This example also shows how to use a software-defined radio (SDR) to transmit the generated waveform using single or multiple antennas.",
          "thumbnailURL": "../../../examples/lte/win64/LTETransmitterUsingSDRExample_01.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "lte.LTETransmitterUsingSDRExample",
          "name": "LTETransmitterUsingSDRExample",
          "url": "lte-transmitter-using-sdr-pluto.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('lte/LTETransmitterUsingSDRExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "LTETransmitterUsingSDRExample.mlx",
        "hGetUSRPRateInformation.m",
        "hPlotDLResourceGrid.m"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="fe">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This example shows how to generate a reference measurement channel (RMC) downlink (DL) LTE waveform suitable for over-the-air transmission."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../../examples/lte/win64/LTETransmitterUsingSDRExample_01.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/jquery/jquery-latest.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../../docset/docset.xml";
            product_help_location = "supportpkg/plutoradio";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script><script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/scripts/livecontrolpopover.js"></script>





<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/bootstrap.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-xs-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2023a" data-language="en" action="../../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="sr-only">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div class="input-group-btn"><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search pull-right icon_32 visible-xs" data-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="visible-xs" id="search_actuator"><button class="btn icon-search btn_search pull-right icon_16" data-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-toggle="offcanvas" data-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="sr-only">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav">Communications Toolbox Support Package for Analog Devices ADALM-Pluto Radio</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../application-specific-examples.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Application-Specific</span></a></li></ul><ul class="nav_scrollspy nav">
<li class="nav_scrollspy_function"><a href="#responsive_offcanvas">LTE Transmitter Using Software Defined Radio</a></li>
<li class="nav_scrollspy_title" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li><a href="#LTETransmitterUsingSDRExample-1" class="intrnllnk">Introduction</a></li><li><a href="#LTETransmitterUsingSDRExample-2" class="intrnllnk">Example Setup</a></li><li><a href="#LTETransmitterUsingSDRExample-3" class="intrnllnk">Transmitter Design</a></li><li><a href="#LTETransmitterUsingSDRExample-4" class="intrnllnk">Further Exploration</a></li><li><a href="#LTETransmitterUsingSDRExample-5" class="intrnllnk">SDR Troubleshooting</a></li></ul>
</nav></div></nav>
<script src="../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 hidden-xs"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=application-specific-examples&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=application-specific-examples&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_block" class="crux_resource"><a href="../referencelist.html?type=block&amp;category=application-specific-examples&amp;s_tid=CRUX_topnav">Blocks</a></li></ul></div></nav></div><div class="visible-xs"><div class="container-fluid"><div class="row"><div class="col-xs-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources<span class="icon-arrow-down icon_16"></span></button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=application-specific-examples&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=application-specific-examples&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_block" class="crux_resource"><a href="../referencelist.html?type=block&amp;category=application-specific-examples&amp;s_tid=CRUX_topnav">Blocks</a></li></ul></div></div></div><div class="col-xs-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-xs-12">

<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-example">
<section itemprop="content"><div class="example_icon"></div><h1 class="r2023a" itemprop="title content" id="mw_58e0e6da-6d88-4f2d-a3c9-47a81ba2871a">LTE Transmitter Using Software Defined Radio</h1><div class="examples_short_list hidden_ios_android"><div data-pane="metadata" class="panel metadata_container panel-default"><div class="panel-body metadata_content"><p class="add_margin_5">This example uses:</p><ul class="list-unstyled add_border_bottom example_product_list" itemprop="requiredprods"><li><a href="matlab:matlab.internal.language.introspective.showAddon('LS')">LTE Toolbox</a></li><li><a href="matlab:matlab.internal.language.introspective.showAddon('PLUTO')">Communications Toolbox Support Package for Analog Devices ADALM-PLUTO Radio</a></li><li><a href="matlab:matlab.internal.language.introspective.showAddon('USRPEMBED')">Communications Toolbox Support Package for USRP Embedded Series Radio</a></li><li><a href="matlab:matlab.internal.language.introspective.showAddon('USRP')">Communications Toolbox Support Package for USRP Radio</a></li><li><a href="matlab:matlab.internal.language.introspective.showAddon('XILINXZYNQ')">Communications Toolbox Support Package for Xilinx Zynq-Based Radio</a></li></ul><a class="btn btn_secondary btn-block" href="matlab:openExample('lte/LTETransmitterUsingSDRExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="lte-LTETransmitterUsingSDRExample"><meta itemprop="exampletitle" content="LTE Transmitter Using Software Defined Radio"></div><span id="LTETransmitterUsingSDRExample" class="anchor_target"></span><p class="shortdesc">This example shows how to generate a reference measurement channel (RMC) downlink (DL) LTE waveform suitable for over-the-air transmission. This example also shows how to use a software-defined radio (SDR) to transmit the generated waveform using single or multiple antennas.</p><div class="procedure"><h3 class="title" id="LTETransmitterUsingSDRExample-1">Introduction</h3><p>This example generates eight frames of a baseband RMC DL waveform. Using SDR hardware such as the Xilinx&#174; Zynq&#174;-Based Radio, this baseband waveform can be modulated for RF transmission. The SDR transmits the waveform by looping transmission of the eight frames for a specified time period. </p><div class="informalfigure"><div id="d124e5953" class="mediaobject"><p><img src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_01.png" alt="sdr_transmit_diagram_published.png" height="190" width="473"></p></div></div><p>This example supports these SDRs.</p><div class="itemizedlist"><ul><li><p>ADALM-Pluto from the Communications Toolbox Support Package for Analog Devices&#174; ADALM-Pluto Radio</p></li><li><p>USRP&#8482; E310/E312 from the Communications Toolbox Support Package for USRP&#8482; Embedded Series Radio</p></li><li><p>AD936x/FMCOMMS5 from the Communications Toolbox Support Package for Xilinx&#174; Zynq&#174;-Based Radio</p></li><li><p>USRP&#8482; N300/N310/N320/N321/B200/B210/X300/X310 from the Communications Toolbox Support Package for USRP&#8482; Radio</p></li></ul></div><h3 class="title" id="LTETransmitterUsingSDRExample-2">Example Setup</h3><p>Before running the example, ensure that you have installed the appropriate support package for the SDR that you intend to use and that you have configured the hardware.</p><p>The <code class="literal">TransmitOnSDR</code> field of the <code class="literal">txsim</code> structure determines whether the example transmits the generated waveform using an SDR.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>txsim.TransmitOnSDR = <span class="live_control_container"><img tabindex="-1" alt="" src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_04.png"><span data-examplename="openExample('lte/LTETransmitterUsingSDRExample')" tabindex="0" data-controlvalue="false" data-trigger="focus" data-container="body" data-toggle="popover" data-placement="top" data-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">false</span></span>;</pre></div></div></div><p>If you select the <code class="literal">TransmitOnSDR</code> field of the <code class="literal">txsim</code> structure, configure the variables required for SDR transmission.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">if</span> txsim.TransmitOnSDR
    txsim.SDRDeviceName = <span class="live_control_container"><img tabindex="-1" alt="" src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_05.png"><span data-examplename="openExample('lte/LTETransmitterUsingSDRExample')" tabindex="0" data-controlvalue="&#34;AD936x&#34;" data-trigger="focus" data-container="body" data-toggle="popover" data-placement="top" data-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">"AD936x"</span></span>;        <span style="color:#228B22">% SDR that is used for waveform transmission</span>
    txsim.RunTime = <span class="live_control_container"><img tabindex="-1" alt="" src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_06.png"><span data-examplename="openExample('lte/LTETransmitterUsingSDRExample')" tabindex="0" data-controlvalue="20" data-trigger="focus" data-container="body" data-toggle="popover" data-placement="top" data-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">20</span></span>;              <span style="color:#228B22">% Time period to loop waveform in seconds</span>
    txsim.RadioCenterFrequency = <span class="live_control_container"><img tabindex="-1" alt="" src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_07.png"><span data-examplename="openExample('lte/LTETransmitterUsingSDRExample')" tabindex="0" data-controlvalue="2450000000" data-trigger="focus" data-container="body" data-toggle="popover" data-placement="top" data-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">2450000000</span></span>; <span style="color:#228B22">% Center frequency in Hz</span>
    txsim.RadioIdentifier = <span class="live_control_container"><img tabindex="-1" alt="" src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_08.png"><span data-examplename="openExample('lte/LTETransmitterUsingSDRExample')" tabindex="0" data-controlvalue="'192.168.3.2'" data-trigger="focus" data-container="body" data-toggle="popover" data-placement="top" data-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">'192.168.3.2'</span></span>;      <span style="color:#228B22">% Value used to identify radio, for example, IP Address, USB Port, or Serial Number</span>
<span style="color:#0000FF">end</span></pre></div></div></div><p>Configure the other fields in the <code class="literal">txsim</code> structure for LTE downlink waveform generation.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>txsim.RC = <span class="live_control_container"><img tabindex="-1" alt="" src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_09.png"><span data-examplename="openExample('lte/LTETransmitterUsingSDRExample')" tabindex="0" data-controlvalue="&#34;R.4&#34;" data-trigger="focus" data-container="body" data-toggle="popover" data-placement="top" data-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">"R.4"</span></span>;          <span style="color:#228B22">% Base RMC configuration, 1.4 MHz bandwidth</span>
txsim.NCellID = <span class="live_control_container"><img tabindex="-1" alt="" src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_10.png"><span data-examplename="openExample('lte/LTETransmitterUsingSDRExample')" tabindex="0" data-controlvalue="17" data-trigger="focus" data-container="body" data-toggle="popover" data-placement="top" data-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">17</span></span>;     <span style="color:#228B22">% Physical layer cell identity</span>
txsim.NFrame = <span class="live_control_container"><img tabindex="-1" alt="" src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_11.png"><span data-examplename="openExample('lte/LTETransmitterUsingSDRExample')" tabindex="0" data-controlvalue="700" data-trigger="focus" data-container="body" data-toggle="popover" data-placement="top" data-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">700</span></span>;      <span style="color:#228B22">% Initial frame number</span>
txsim.TotFrames = <span class="live_control_container"><img tabindex="-1" alt="" src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_12.png"><span data-examplename="openExample('lte/LTETransmitterUsingSDRExample')" tabindex="0" data-controlvalue="8" data-trigger="focus" data-container="body" data-toggle="popover" data-placement="top" data-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">8</span></span>;   <span style="color:#228B22">% Number of frames to generate</span>
txsim.NumAntennas = <span class="live_control_container"><img tabindex="-1" alt="" src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_13.png"><span data-examplename="openExample('lte/LTETransmitterUsingSDRExample')" tabindex="0" data-controlvalue="1" data-trigger="focus" data-container="body" data-toggle="popover" data-placement="top" data-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">1</span></span>; <span style="color:#228B22">% Number of transmit antennas</span></pre></div></div></div><h3 class="title" id="LTETransmitterUsingSDRExample-3">Transmitter Design</h3><p>Follow these steps to understand how the LTE transmitter functions.</p><div class="orderedlist"><ol style="list-style: decimal;"><li><p>Generate a baseband LTE signal.</p></li><li><p>Prepare the baseband signal for transmission using the SDR hardware.</p></li><li><p>Send the baseband data to the SDR hardware for upsampling and transmission at the desired center frequency.</p></li></ol></div><p><strong class="emphasis bold">Generate Baseband LTE Signal</strong></p><p>The <a href="../../../lte/ref/ltermcdltool.html" data-docid="lte_ref#bt24_40" class="a"><code class="olink">lteRMCDLTool</code></a><span role="cross_prod"> (LTE Toolbox)</span> function provides the default configuration parameters defined in 3GPP TS 36.101 Annex A.3, which are required to generate an RMC.  </p><p>Customize the parameters within the configuration structure <code class="literal">rmc</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rmc = lteRMCDL(txsim.RC);
rmc.NCellID = txsim.NCellID;
rmc.NFrame = txsim.NFrame;
rmc.TotSubframes = txsim.TotFrames*10; <span style="color:#228B22">% 10 subframes per frame</span>
rmc.CellRefP = txsim.NumAntennas;      <span style="color:#228B22">% Configure number of cell-specific reference signal antenna ports</span>
rmc.OCNGPDSCHEnable = <span style="color:#A020F0">"On"</span>;            <span style="color:#228B22">% Adds noise to unallocated PDSCH resource elements</span></pre></div></div></div><p>If using two or more antennas, enable transmit diversity.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">if</span> rmc.CellRefP &gt;= 2
    rmc.PDSCH.TxScheme = <span style="color:#A020F0">"TxDiversity"</span>;    
    rmc.OCNGPDSCH.TxScheme = <span style="color:#A020F0">"TxDiversity"</span>;
<span style="color:#0000FF">else</span>
    rmc.PDSCH.TxScheme = <span style="color:#A020F0">"Port0"</span>;
    rmc.OCNGPDSCH.TxScheme = <span style="color:#A020F0">"Port0"</span>;
<span style="color:#0000FF">end</span>
rmc.PDSCH.NLayers = txsim.NumAntennas;</pre></div></div></div><p>Create the baseband waveform (<code class="literal">eNodeBOutput</code>), a fully populated resource grid (<code class="literal">txGrid</code>), and the full configuration of the RMC using the <a href="../../../lte/ref/ltermcdltool.html" data-docid="lte_ref#bt24_40" class="a"><code class="olink">lteRMCDLTool</code></a><span role="cross_prod"> (LTE Toolbox)</span> function.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>trData = [1;0;0;1]; <span style="color:#228B22">% Transport data</span>
[eNodeBOutput,txGrid,rmc] = lteRMCDLTool(rmc,trData);
txsim.SamplingRate = rmc.SamplingRate;</pre></div></div></div><p>Display the resource grid populated with the highlighted channels and the power spectral density of the LTE baseband signal. You can see a 1.4 MHz signal bandwidth at baseband in the spectrum plot.</p><p>If using multiple transmit antennas, set <code class="literal">displayAntennaForGrid</code> to the antenna port you would like to display.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>displayAntennaForGrid = 1;
ax = axes;
hPlotDLResourceGrid(rmc,txGrid(:,:,displayAntennaForGrid),ax,displayAntennaForGrid);
ax.Children(1).EdgeColor = <span style="color:#A020F0">"none"</span>;
title(<span style="color:#A020F0">"Transmitted Resource Grid"</span>);</pre></div></div></div><div class="informalfigure"><div id="d124e6087" class="mediaobject"><p><img src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_02.png" alt="Figure contains an axes object. The axes object with title Transmitted Resource Grid, xlabel OFDM Symbol Index, ylabel Subcarrier Index contains 10 objects of type patch, surface. These objects represent Unused, PDSCH, Cell RS, PSS, SSS, PBCH, PCFICH, PHICH, PDCCH." width="560"></p></div></div><p>Display the power spectral density.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>spectrumScope = spectrumAnalyzer( <span style="color:#0000FF">...</span>
    SampleRate=txsim.SamplingRate, <span style="color:#0000FF">...</span>
    SpectrumType=<span style="color:#A020F0">"power-density"</span>, <span style="color:#0000FF">...</span>
    Title=<span style="color:#A020F0">"Baseband LTE Signal Spectrum"</span>, <span style="color:#0000FF">...</span>
    YLabel=<span style="color:#A020F0">"Power Spectral Density"</span>);
spectrumScope(eNodeBOutput);
release(spectrumScope);</pre></div></div></div><div class="informalfigure"><div id="d124e6095" class="mediaobject"><p><img src="../../../examples/lte/win64/LTETransmitterUsingSDRExample_03.png" width="800"></p></div></div><p><strong class="emphasis bold">Prepare for Transmission</strong></p><p>The transmitter plays the LTE signal in a loop. The example splits the baseband signal into LTE frames of data, and the SDR Transmitter object (<code class="literal">sdrTransmitter</code>) transmits a full LTE frame. The example reshapes the baseband LTE signal into an <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>M</mi></mrow></math></span>- by -<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>N</mi></mrow></math></span> array, where <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>M</mi></mrow></math></span> is the number of samples per LTE frame and <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>N</mi></mrow></math></span> is the number of frames generated.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">if</span> txsim.TransmitOnSDR
    <span style="color:#228B22">% Scale the signal for better power output and convert to int16, which</span>
    <span style="color:#228B22">% is the native format for the SDR hardware.</span>
    powerScaleFactor = 0.7;
    eNodeBOutput = eNodeBOutput.*(1./max(abs(eNodeBOutput))*powerScaleFactor);
    eNodeBOutput = int16(eNodeBOutput*2^15);

    <span style="color:#228B22">% LTE frames are 10 ms long</span>
    samplesPerFrame = 10e-3*txsim.SamplingRate;
    numFrames = length(eNodeBOutput)/samplesPerFrame;

    <span style="color:#228B22">% Ensure you are using an integer number of frames</span>
    <span style="color:#0000FF">if</span> mod(numFrames,1)
        warning(<span style="color:#A020F0">"Non integer number of frames. Trimming transmission ..."</span>);
        numFrames = floor(numFrames);
    <span style="color:#0000FF">end</span>

    <span style="color:#228B22">% Reshape the baseband LTE data into frames for simpler transmission</span>
    fprintf(<span style="color:#A020F0">"Splitting transmission into %i frames\n"</span>,numFrames)
    txFrame = reshape(eNodeBOutput,samplesPerFrame,numFrames,txsim.NumAntennas);

    <span style="color:#0000FF">if</span> matches(txsim.SDRDeviceName, [<span style="color:#A020F0">"AD936x"</span>, <span style="color:#A020F0">"FMCOMMS5"</span>, <span style="color:#A020F0">"Pluto"</span>, <span style="color:#A020F0">"E3xx"</span>])
        sdrTransmitter = sdrtx( <span style="color:#0000FF">...</span>
            txsim.SDRDeviceName, <span style="color:#0000FF">...</span>
            CenterFrequency=txsim.RadioCenterFrequency, <span style="color:#0000FF">...</span>
            BasebandSampleRate=txsim.SamplingRate);
        <span style="color:#0000FF">if</span> matches(txsim.SDRDeviceName, [<span style="color:#A020F0">"AD936x"</span>, <span style="color:#A020F0">"FMCOMMS5"</span>, <span style="color:#A020F0">"E3xx"</span>])
            sdrTransmitter.ShowAdvancedProperties = true;
            sdrTransmitter.BypassUserLogic = true;
            sdrTransmitter.IPAddress = txsim.RadioIdentifier;
        <span style="color:#0000FF">else</span>
            sdrTransmitter.RadioID = txsim.RadioIdentifier;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">else</span>
        <span style="color:#228B22">% For the USRP SDRs</span>
        sdrTransmitter = comm.SDRuTransmitter(<span style="color:#0000FF">...</span>
            Platform=txsim.SDRDeviceName,<span style="color:#0000FF">...</span>
            CenterFrequency=txsim.RadioCenterFrequency);
        [sdrTransmitter.MasterClockRate, sdrTransmitter.InterpolationFactor] = <span style="color:#0000FF">...</span>
            hGetUSRPRateInformation(txsim.SDRDeviceName,txsim.SamplingRate);
        <span style="color:#0000FF">if</span> matches(txsim.SDRDeviceName, [<span style="color:#A020F0">"B200"</span>, <span style="color:#A020F0">"B210"</span>])
            <span style="color:#228B22">% Change the serial number as needed for USRP B200/B210</span>
            sdrTransmitter.SerialNum = txsim.RadioIdentifier;
        <span style="color:#0000FF">else</span>
            sdrTransmitter.IPAddress = txsim.RadioIdentifier;
        <span style="color:#0000FF">end</span>
        sdrTransmitter.EnableBurstMode = true;
        sdrTransmitter.NumFramesInBurst = numFrames;
    <span style="color:#0000FF">end</span>
    sdrTransmitter.ChannelMapping = 1:txsim.NumAntennas;   
<span style="color:#0000FF">end</span></pre></div></div></div><p><strong class="emphasis bold">Transmission Using SDR Hardware</strong></p><p>The example uses a <a href="../../../matlab/ref/try.html" data-docid="matlab_ref#bujy28i-1" class="a"><code class="olink">try</code></a> block to transfer the baseband data to the SDR hardware. Using the <code class="literal">try,</code> <code class="literal">catch</code> block means that if an error occurs during the transmission, the hardware releases the resources used by the SDR System object&#8482;. The <code class="literal">sdrTransmitter</code> System object transmits a full frame of LTE data.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">if</span> txsim.TransmitOnSDR
    fprintf(<span style="color:#A020F0">"Starting transmission at Fs = %g MHz\n"</span>,txsim.SamplingRate/1e6)
    currentTime = 0;
    <span style="color:#0000FF">try</span>
        <span style="color:#0000FF">while</span> currentTime&lt;txsim.RunTime
            <span style="color:#0000FF">for</span> n = 1:numFrames
                bufferUnderflow = sdrTransmitter(squeeze(txFrame(:,n,:)));
                <span style="color:#0000FF">if</span> bufferUnderflow
                    warning(<span style="color:#A020F0">"Dropped samples."</span>)
                <span style="color:#0000FF">end</span>
            <span style="color:#0000FF">end</span>
            currentTime = currentTime+numFrames*10e-3; <span style="color:#228B22">% One frame is 10 ms</span>
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">catch</span> ME
        release(sdrTransmitter);
        rethrow(ME)
    <span style="color:#0000FF">end</span>
    fprintf(<span style="color:#A020F0">"Transmission finished\n"</span>)
    release(sdrTransmitter);
<span style="color:#0000FF">end</span></pre></div></div></div><h3 class="title" id="LTETransmitterUsingSDRExample-4">Further Exploration</h3><div class="itemizedlist"><ul><li><p>You can use the companion example <a href="../../../lte/ug/lte-receiver-using-software-defined-radio-sdr.html" data-docid="lte_ug#example-LTEReceiverUsingSDRExample" class="a">LTE Receiver Using Software Defined Radio</a><span role="cross_prod"> (LTE Toolbox)</span> to decode the broadcast channel of the waveform generated by this example. Try changing the cell identity and initial system frame number and observe the detected cell identity and frame number at the receiver.</p></li><li><p>If using a supported multi-channel SDR, try increasing the number of antennas</p></li></ul></div><h3 class="title" id="LTETransmitterUsingSDRExample-5">SDR Troubleshooting</h3><div class="itemizedlist"><ul><li><p>ADALM-PLUTO Radio <a href="common-problems-and-fixes.html" data-docid="plutoradio_ug#bvn89q2-68" class="a">Common Problems and Fixes</a></p></li><li><p>USRP Embedded Series Radio <a href="../../../supportpkg/usrpembeddedseriesradio/ug/common-problems-and-fixes.html" data-docid="usrpembeddedseriesradio_ug#bu1kohy-57" class="a">Common Problems and Fixes</a><span role="cross_prod"> (Communications Toolbox Support Package for USRP Embedded Series Radio)</span></p></li><li><p>Xilinx Zynq-Based Radio <a href="../../../supportpkg/xilinxzynqbasedradio/ug/common-problems-and-fixes.html" data-docid="xilinxzynqbasedradio_ug#bu1kohy-57" class="a">Common Problems and Fixes</a><span role="cross_prod"> (Communications Toolbox Support Package for Xilinx Zynq-Based Radio)</span></p></li><li><p>USRP Radio <a href="../../../supportpkg/usrpradio/ug/common-problems-and-fixes.html" data-docid="usrpradio_ug#bud4heb-1" class="a">Common Problems and Fixes</a><span role="cross_prod"> (Communications Toolbox Support Package for USRP Radio)</span></p></li></ul></div></div></section>
    </div>
<div class="modal fade" id="open-example-dialog" tabindex="-1" role="dialog" aria-labelledby="openExampleDialogLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button><h2 class="h3 modal-title">Open Example</h2></div><div class="modal-body" id="dialog-body"><p>You have a modified version of this example. Do you want to open this example with your edits?</p></div><div class="modal-footer"><a id="open-example-dialog-replace" class="btn btn_color_blue companion_btn" data-dismiss="modal">No, open this example and discard my edits</a><a id="open-example-dialog-continue" class="btn btn_color_blue" data-dismiss="modal">Yes</a></div></div></div></div>
<div class="clearfix"></div>
<div align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></section>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-xs-12">
<p class="copyright">© 1994-2023 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
